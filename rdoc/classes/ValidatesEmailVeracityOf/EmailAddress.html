<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ValidatesEmailVeracityOf::EmailAddress</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ValidatesEmailVeracityOf::EmailAddress</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/validates_email_veracity_of_rb.html">
                lib/validates_email_veracity_of.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Defines an email address and contains methods to perform things needed in
order to validate it.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000003">domain</a>&nbsp;&nbsp;
      <a href="#M000005">domain_has_servers?</a>&nbsp;&nbsp;
      <a href="#M000002">known_domains</a>&nbsp;&nbsp;
      <a href="#M000001">new</a>&nbsp;&nbsp;
      <a href="#M000004">pattern_is_valid?</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">address</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc"></td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="#M000002" class="method-signature">
          <span class="method-name">known_domains</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Domains that we know have mail servers
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000002-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000002-source">
<pre>
     <span class="ruby-comment cmt"># File lib/validates_email_veracity_of.rb, line 108</span>
108:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">known_domains</span>
109:       <span class="ruby-node">%w[ aol.com gmail.com hotmail.com mac.com msn.com
110:       rogers.com sympatico.ca yahoo.com ]</span>
111:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="#M000001" class="method-signature">
          <span class="method-name">new</span><span class="method-args">(email = '')</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Creates a <a href="EmailAddress.html#M000001">new</a> <a
href="EmailAddress.html">EmailAddress</a> object, optionally accepts an
email address as an argument.
</p>
<h4>Example</h4>
<p>
<tt><a
href="EmailAddress.html#M000001">EmailAddress.new</a>(&#8216;heycarsten@gmail.com&#8217;).<a
href="EmailAddress.html#M000003">domain</a> # =&gt;
&quot;gmail.com&quot;</tt>
</p>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000001-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000001-source">
<pre>
     <span class="ruby-comment cmt"># File lib/validates_email_veracity_of.rb, line 103</span>
103:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">email</span> = <span class="ruby-value str">''</span>)
104:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">address</span> = <span class="ruby-identifier">email</span>
105:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="#M000003" class="method-signature">
          <span class="method-name">domain</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000003-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000003-source">
<pre>
     <span class="ruby-comment cmt"># File lib/validates_email_veracity_of.rb, line 113</span>
113:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">domain</span>
114:       <span class="ruby-constant">Domain</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">address</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'@'</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'@'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>)
115:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="#M000005" class="method-signature">
          <span class="method-name">domain_has_servers?</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Checks if the email address&#8217; <a
href="EmailAddress.html#M000003">domain</a> has any servers in it&#8216;s
mail exchange (MX) or address (A) records. If it does then true is
returned, otherwise false is returned. If the lookup times out, it will
return false (or nil if the :fail_on_timeout option is specified.)
Additionally the secondary (A record) lookup can be turned off (if your
really picky) by passing in the option :mx_only =&gt; true.
</p>
<h4>Options</h4>
<ul>
<li><b>mx_only</b>

<ul>
<li>The <a href="EmailAddress.html#M000003">domain</a> is only checked for the
presence of mail exchange servers, the address record is ignored.

</li>
</ul>
</li>
<li><b>timeout</b>

<ul>
<li>Time (in seconds) before the <a href="EmailAddress.html#M000003">domain</a>
lookup is skipped. Default is two.

</li>
</ul>
</li>
<li><b>fail_on_timeout</b>

<ul>
<li>Causes validation to fail if a timeout occurs.

</li>
</ul>
</li>
</ul>
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000005-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000005-source">
<pre>
     <span class="ruby-comment cmt"># File lib/validates_email_veracity_of.rb, line 135</span>
135:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">domain_has_servers?</span>(<span class="ruby-identifier">options</span> = {})
136:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">EmailAddress</span>.<span class="ruby-identifier">known_domains</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">domain</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase</span>)
137:       <span class="ruby-identifier">servers</span> = <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">exchange_servers</span>(<span class="ruby-identifier">options</span>)
138:       <span class="ruby-identifier">servers</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">domain</span>.<span class="ruby-identifier">address_servers</span>(<span class="ruby-identifier">options</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">servers</span>.<span class="ruby-identifier">blank?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mx_only</span>]
139:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">servers</span>.<span class="ruby-identifier">nil?</span>
140:         <span class="ruby-identifier">options</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">:fail_on_timeout</span>, <span class="ruby-keyword kw">true</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-operator">:</span> <span class="ruby-keyword kw">true</span>
141:       <span class="ruby-keyword kw">else</span>
142:         <span class="ruby-operator">!</span><span class="ruby-identifier">servers</span>.<span class="ruby-identifier">empty?</span>
143:       <span class="ruby-keyword kw">end</span>
144:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="#M000004" class="method-signature">
          <span class="method-name">pattern_is_valid?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000004-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000004-source">
<pre>
     <span class="ruby-comment cmt"># File lib/validates_email_veracity_of.rb, line 117</span>
117:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pattern_is_valid?</span>
118:       <span class="ruby-identifier">address</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/\A([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})\Z/i</span>
119:     <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>